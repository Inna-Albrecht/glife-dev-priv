# katja_dorm
!2022/04/07

!!This files governs Katjas interactions in her dorm room. The following variables are part of her storry line:
!! katjaQW['QWstage'] = 1 You have agreed to hang out with Katja afer school. (meynoldQW = 1)
!! katjaQW['QWstage'] = 2 You have been to Katja''s house and you can go there to hang out with her. (meynoldQW = 2) 
!! katjaQW['QWstage'] = 3 You have kissed Katja and she might be interested in more. (katjaFirstKiss = 1 and KatjaOTN)
!! npc_sex['A14'] = 1 You have had at least one sexual experince with Katja.
!! katjaQW['QWstage'] = 4 Katja have asked you to helpe have sex with a boy.
!! katjaQW['QWstage'] = 5 You have agreed to help Katja have sex with a boy.
!! katjaQW['QWstage'] = 6 You have talked with Katja about her first experience with a boy.
!! katjaQW['QWstage'] = 7 You have told Katja about the boys in the park.

!! katjaQW['boy_block'] is set to 1 if you tell Katja that you have no interest in boys when she ask about you sex experience whit boy. 

!! katjaQW['anal_quest'] =1 Katja has asked you to help her have anal sex with a boy.
!! katjaQW['anal_quest'] =2 You have agreed to help Katja have anal sex with a boy.
!! katjaQW['anal_quest'] =3 Katja has had anal sex with a boy and you discussed it afterwards.

!! katjaQW['pantiesQWstage'] 	The stages of the side quest of getting Katja to go commando to school. 1 to 3 are just temprary counts,
!!							4 means you have gotten Katja to take off her panties when you ask her, and 5 means that she won''t wear panties to school anymore.
!!							If you want to check if Katja is not wearing panties at school use katjaQW['pantiesQWstage'] >= 5. (katjaTanga, katja_tanga_end)

!! katjaQW['school_kiss'] Increases the first two times you kiss at school. Used to trigger the kissing competition in the park. (flag_start_parc)
	
!! katjaQW['slut'] a number that increases as Katja becomes more and more sexualy liberated, and alows her to be villing to do more sexual stuff. (katjaSlut)
!! katjaQW['horny'] a messure of Katja''s arousal. Grows until she have an orgasmn and will determine how willing she is at the moment to have sex.
!! katjaQW['dom'] a number that tells if Katja is dominant or submissive. 0 is neutral, a negative means she is submissive and a positive means she is dominant. In general the absolute value needs to be above 30 before you will see any effect. (katjaDom but not a 1 to 1 translation since that variable was all over the place.)

!! katjaQW['park_sex'] 	a measure of what experience Katja has had with random guys in the park. 0 means she has not had sex with anybody in the park, 
!!					1 means that she has had sex with one guy at a time (either alone, in a threesome with the player character or while the player had sex with another guy next to them)
!!					2 means she has had a threesome with 2 guys you met in the park, and 3 means she has paticipated in an orgy with guys from the park. (katjaSex)

!! katjaQW['masturbates'] = 1 Katja has started masturbating at night if she get too horny. (KatjaMastr)
!! The following 3 variables functions as pcs_throat, pcs_vag and pcs_ass does for the player character. So whenever Katja has sex with a guy or a dildo is used on her you should add code to change them as is done for the player character in arousal.
!! npc_throat['A14'] The capacity for Katja to take a dick (or dildo) down her throat. (KatjaThroat)
!! npc_vag['A14'] The capacity for Katja to take a dick (or dildo) in the vagina.
!! npc_ass['A14'] The capacity for Katja to take a dick (or dildo) in her ass. (KatjaAnus)

!! katjaQW['strapon_bj'] = 1 Katja has given a BJ to your strap-on.
!! katjaQW['strapon_vag'] = 1 You have fucked Katja''s pussy with your strap-on.
!! katjaQW['strapon_ass'] = 1 You have fucked Katja''s ass with your strap-on.
!! katjaQW['fisted_vag'] = 1 You have fisted Katja''s vagina.

!! katjaQW['ivan_pussy'] = 1 Katja has taken Ivan''s cock in her pussy.
!! katjaQW['ivan_anal'] = 1 Katja has taken Ivan''s cock in her ass.
!! katjaQW['marcus_pussy'] = 1 Katja has taken Marcus''s cock in her pussy.
!! katjaQW['marcus_anal'] = 1 Katja has taken Marcus''s cock in her ass.
!! katjaQW['marcus_disco'] = 1 Katja and the player character have had a threesome with Marcus at the community center disco.

!! katjaQW['Marcus_day'] is set to daystart if you or Katja ask to have a threesome with Marcus. Such that the question will only be asked once per day.

!! katjaQW['birth_control_start_day'] This is set to the daystart value from the day Katja''s birth control will be effective if the player tells her to use it. Should be used to check if Katja can become pregnant by if katjaQW['birth_control_start_day'] ! 0 and katjaQW['birth_control_start_day'] < daystart to make sure is protected.

!! KatjaQW['orgasm_day'] Is set to be equal to daystart when Katja gain an orgasm (It is not set all palces). (KatjaOrgasm)
!! katjaQW['take_of_panties_day'] is set to ddaystart if you get >katja to take of her panties during school break.
!! katjaQW['afterschool_hangout_day'] Is set to be equal daystart when you choose to hang out with Katja after school. (katjaMeynoldday)
!! katjaQW['no_panties_day'] Is set to daystart if you show Katja that you are not wearing panties.
!! katjaQW['no_panties_day_disco'] Is set to daystart if you show Katja that you are not wearing panties at the pav disco. (tangaday)

!! katjaQW['knows_masterbation'] = 1 You have told Katja how you masturbate (KatjaKnowMastr =1)
!! katjaQW['knows_self_fisting'] = 1 You have told Katja how you stuck your fist into your pussy
!! katjaQW['knows_self_fisting_anal'] = 1 You have told Katja how you stuck your fist into your ass
!! katjaQW['knows_BJ'] = 1 You have told Katja that you have given a guy a blow-job (KatjaKnowBJ =1)
!! katjaQW['knows_sex'] = 1 You have told Katja that you have had virginal sex with a guy (KatjaKnowSex =1)
!! katjaQW['knows_anal'] = 1 You have told Katja that you have had anal sex with a guy (KatjaKnowAnal =1)
!! katjaQW['knows_cuni'] = 1 You have told Katja that have gone down on another girl (KatjaKnowKuni =1)
!! katjaQW['know_Pirced_tongue'] = 1 katja have noticed your tongue piercing (KatjaKnowPirsA =1)

!! katja['school_sex'] = 1 Katja have taken you to a storage room at school to have sex. (katschoolsex)
!! katjaQW['disco_Foto'] =1 somebody have takien a picture of Katja''s exposed breast at the disco. Right now to only use of this variable is so that another foto wont be taken. (katja_disco_Foto)

!! katjaQW['drunk_help'] is set to 1 when Katja walks you home from the disco because you are to drunk. Will be reset to 0 after you talk to her about it at school. (meynoldQW = 3)
!! katjaQW['no_panties_at_disco'] is set if Katja shows you at the disco that she is not vearing panties. Will be reset to 0 at night. (katja_disco_end)
!! KatjaQW['sex_in_the_park_comment'] temposry varibale which is set during sex with guys in the park to make sure she give the right comment before she says goodbuy. Will be rest to 0 when going home after sex. (KatjaOhrenet)

!! katjaQW['know_katja_uni'] = 1 Katja has told you she is going to uni to study teaching.
!! katjaQW['know_going_to_teaching_degree'] =1 you have told Katja that you are going to the university to study in the teaching program.
!! katjaQW['meet_uni_class'] = 1 You have meet Katja in you uni class.

if $ARGS[0] = 'start':
	$loc = 'katja_dorm'
	$loc_arg = 'start'
	$menu_loc = 'katja_dorm'
	$menu_arg = 'start'
	$locclass = 'livingr'
	$location_type = 'indoors'
	CLOSE ALL
	menu_off = 0
	gs 'katja_meynold_schedule'
	gs 'stat'
	'<center><b><font color="maroon"><<$npc_firstname[''A14'']>> ''S Dorm Room</font></b></center>'
	'<center><img <<$set_imgh>> src="images/characters/pavlovsk/school/girl/katja/uni/dorm/dorm_room.jpg"></center>'
	'The dorm room have two beds the left one belongs to '+iif( sofiaQW['know'] = 0, 'Katja''s room mate', 'Sofia')+' and Katja''s is the right one. Above Katja''s bed is a full book case, and the wall is plastered with posters and notes.'
	'Her table is likewise full of stuff, and in middle of stands her laptop. The side of '+iif( sofiaQW['know'] = 0, 'her room mate', 'Sofia')+' have a lot less stuff.'

	if locat['katja'] = 31:
		'Katja is sitting at her desk.'
		act 'Talk to katja': gt 'katja_dorm', 'talk'
	elseif locat['katja'] = 20:
		'Katja is a sleep, so you should not disturb her.'
	elseif locat['katja'] = 22:
		'Katja is getting dressed and doing her makeup, she doesn want to be disturbed right now.'
	elseif locat['katja'] = 24:
		if minut < 50: 
			'Katja is preparing to go to class, collecting the things she needs.'
			!!act 'Talk to Katja': gt 'katja_uni', 'chat' This is the generic talk that can also be accessed if she is waiting for class at unni campus
		else
			'Katja is heading out the door to go to class and doesn''t have time to talk right now.'
		end
	else
		'Katja is not in her room'
	end

	act 'Leave Katja''s dorm room': minut += 2 & gt 'uni_dorm', 'second_floor'
end

if $ARGS[0] = 'talk':
	menu_off = 1
	gs 'katja_meynold_schedule'
	gs 'stat'
	'<center><b><font color="maroon"><<$npc_firstname[''A14'']>> <<$npc_lastname[''A14'']>></font></b></center>'
	'<center><img <<$set_imgh>> src="images/characters/shared/headshots_main/big14.jpg"></center>'	
	if katjaQW['QWstage'] > 2:
		if katjaQW['horny'] < 20:
			'Katja looks calm and stoic.'
		elseif katjaQW['horny'] < 40:
			'Katja looks at you with a naughty twinkle in her eyes.'
		elseif katjaQW['horny'] < 60:
			'Katja looks at you, a faint blush on her cheeks as she smiles at you mischievously.'
		elseif katjaQW['horny'] < 80:
			'Katja is blushing fairly obviously and looks at you longingly.'
		else
			'Katja''s face is flushed bright red and her chest is heaving from her heavy breathing. She''s idly rubbing her thighs against one another.'
		end
	else
		'Katja looks at you with a smile.'
	end

	if locat['katja'] ! 31:
		!!Right now we only check to shee if Katja is supposed to be home and available for chatting, if not she will show out. Later when other actions are written then you might be able to follow her.
		'"Sorry but I have to run now. See you later," she says.'
		act 'Leave Katja''s dorm room': minut += 2 & gt 'uni_dorm', 'second_floor'
	else
		if min(katjaQW['horny'],100) > rand(40,160):
			if katjaQW['QWstage'] > 2:
				!!The standard start of her sex scenes at home.
				gt 'KatjaHomeTalk', 'hornykiss'
			else
				!!This only triggers if the player have never kissed Katja.
				gt 'KatjaHomeTalk', 'tender_kiss'
			end
		else 
			if npc_pregtalk['A14'] = 0 and (KatjaConflict = 0 or katjaconflict = 2) and func('body_din','pregnancyVisibility') = 1:
				!! If Katja can see you are pregant and you haven''t already told her this will create a conflict with to different responses depending on if Katja is pregnant or not.
				if kid > 0:
					cla
					gs 'stat'
					minut += 5
					KatjaConflict = 1
					KatConCheck = daystart
					'"You''re pregnant again?" Her face turns red and she glares at you with an intensity like you''ve never seen before. "After everything, you still didn''t trust me enough to tell me?"'
					'You try to speak up but she folds her arms and turns her back to you.'
					'"I thought there was something special between us..." Something wet glistens on her cheek, which she wipes away dismissively. "Get out. I don''t want to see you right now."'

				elseif knowKatjaPreg = 1:
					cla
					gs 'stat'
					minut += 5
					KatjaConflict = 1
					KatConCheck = daystart
					'"Are you pregnant?" Katja looks at you, betrayal in her eyes. "Why didn''t you tell me? I thought we were closer than that. I told you when I got pregnant. I need to think. We''ll talk later."'

				else
					cla
					*nl
					minut += 5
					KatjaConflict = 1
					KatConCheck = daystart
					'"Are you pregnant? Why didn''t you tell me? I thought we were closer than that. I need to think. We''ll talk later."'
				end							
			act 'Leave Katja''s dorm room': minut += 2 & gt 'uni_dorm', 'second_floor'
			else
				!!If no events triggers they you go to the part where the player can choose things to do with Katja.
				gt 'katja_dorm', 'chat' 
			end
		end
	end
	act 'Leave Katja''s dorm room': 
		if sofiaQW['know'] = 0 and university['semester_week'] > 0:
			gt 'katja_dorm', 'soifa_meet'
		else
			minut += 2
			gt 'uni_dorm', 'second_floor'
		end
	end
end

if $ARGS[0] = 'chat':
	!!This is what gives the different option for the player to talk with Katja about.
	'<center><b><font color="maroon"><<$npc_firstname[''A14'']>> <<$npc_lastname[''A14'']>></font></b></center>'
	'<center><img <<$set_imgh>> src="images/characters/shared/headshots_main/big14.jpg"></center>'

	if katjaQW['QWstage'] > 2:
		if katjaQW['horny'] < 20:
			'Katja looks calm and stoic.'
		elseif katjaQW['horny'] < 40:
			'Katja looks at you with a naughty twinkle in her eyes.'
		elseif katjaQW['horny'] < 60:
			'Katja looks at you, a faint blush on her cheeks as she smiles at you mischievously.'
		elseif katjaQW['horny'] < 80:
			'Katja is blushing fairly obviously and looks at you longingly.'
		else
			'Katja''s face is flushed bright red and her chest is heaving from her heavy breathing. She''s idly rubbing her thighs against one another.'
		end
	else
		'Katja looks at you with a smile.'
	end

	act 'Chat with Katja':
		!!The generic chat option.
		cla & *clr
		katjaQW['horny'] += 1
		minut += 15
		gs 'stat'
		'<center><b><font color="maroon"><<$npc_firstname[''A14'']>> <<$npc_lastname[''A14'']>></font></b></center>'
		'<center><img <<$set_imgh>> src="images/characters/shared/headshots_main/big14.jpg"></center>'
		
		if rand(0,100) > katjaQW['horny'] + min(katjaQW['slut']/2,50):
			!!If Katja is horny she will talk about sex, else she will talk about normal stuff. The more corrupted she is the less horny she need to be to talk about sex.
			'Katja talks about her university subjects, cosmetics, the latest fashion trends and other things she considers very important.'
		else
			gs 'KatjaHomeTalk', 'Sextalk'
		end
		act 'Continue': gt 'katja_dorm', 'talk'
	end
			
	if katjaQW['boy_lie'] = 1:
		!!If Katja told you that she was interested in a boy and wanted to try kissing because of that you can ask her who it is. Wont get an answer before she is somehow corrupted and have started a sexual relationship.
		act 'Ask Katja who she likes':
			cla & *clr
			katjaQW['horny'] += 1
			minut += 15
			gs 'stat'
			'<center><b><font color="maroon"><<$npc_firstname[''A14'']>> <<$npc_lastname[''A14'']>></font></b></center>'
			'<center><img <<$set_imgh>> src="images/characters/shared/headshots_main/big14.jpg"></center>'
			'"So who''s the boy you mentioned being interested in earlier?" you ask curiously.' 
			if katjaQW['slut'] >= 60 and npc_sex['A14'] > 0 and katjaQW['horny'] > 40:
				'"Nobody, you dummy!" she laughs. "It was just an excuse so you would kiss me!"'
				katjaQW['boy_lie'] = 2
				act 'Continue': gt 'KatjaHomeTalk', 'hornykiss'
			else
				'"That''s my secret, and I''m not going to tell you!" she says with a wink.'
				act 'Continue': gt 'katja_dorm', 'talk'
			end
		end
	end

	!!if katjaQW['QWstage'] = 4 and katjaQW['marcus_pussy'] = 0: act 'Tell her you''ll find a boy for her to have sex with': gt 'KatjaHomeTalk', 'boy_discussion'
	!!If Katja asked your help in finding a boy to try sex with and you said no. You have the choice to reverse that decision.

	!!if katjaQW['anal_quest'] = 1: act 'Tell her you''ll find a boy for her to try anal with': gt 'KatjaHomeTalk', 'anal_discussion'
	!!If Katja asked your help in finding a boy to try anal sex with and you said no. You have the choice to reverse that decision.

	if katjaQW['slut'] >= 50 and katjaQW['horny'] >= 80 and npc_sex['A14'] > 0:
		!!If you are in a sexual relationship and you can see that Katja is very horny, then you have the possibility to start sex.
		act 'Lick Katja': gt 'KatjaEvDin', 'kuni_dom'
	end

	!!if katjaQW['QWstage'] = 5 and katjaQW['marcus_asked'] = 2 and week < 6 and (locat['Vicky'] = 10 or locat['Vicky'] = 11) and (katjaQW['horny']+katjaQW['slut']) > 100:
	!!Katja will only have Marcus come over when Vicky is in the park with Vanya and Tamara is not home. This is the lead in to the Marcus threesome if it is the first time.
	!!	act 'Suggest that you call Marcus':
	!!		*clr & cla
	!!		katjaQW['Marcus_day'] = daystart
	!!		minut += 5
	!!		gs 'stat'
	!!		'<center><img <<$set_imgh>> src="images/characters/shared/headshots_main/big14.jpg"></center>'
	!!		'Katja is looking aroused, so you suggest calling Marcus so that Katja can finally see what it''s like to have sex with a boy.'
	!!		'"Okay. Let''s call him. We should have time before Vicky comes home," she says, looking both aroused and nervous at the same time.'
	!!		act 'Call Marcus': gt 'katja_sex', 'marcus_wait'
	!!	end
	!!end

	if katjaQW['birth_control_start_day'] = 0 and katjaQW['QWstage'] >= 6:
		!!If you haven''t already told katja to use birthcontrol you can do so. This will prevent her from getting pregnant, and is necessary for taking to the park to have sex with random boys.
		act 'Tell Katja that you think she should use birth control': gt 'KatjaHomeTalk', 'preventation_talk'
	end

	if npc_pregtalk['A14'] = 0 and (KatjaConflict = 0 or katjaconflict = 2) and knowpreg = 1 and pregchem > 0 and func('body_din','pregnancyVisibility') = 0:
	!!If you are pregnant you can tell Katja that you are. Diferent versions depending on if she is pregnant or not and if you already have kids.
		if kid > 0:
			act 'Tell her you''re pregnant':
				cla & *clr
				gs 'stat'
				'<center><b><font color="maroon"><<$npc_firstname[''A14'']>> <<$npc_lastname[''A14'']>></font></b></center>'
				'<center><img <<$set_imgh>> src="images/characters/shared/headshots_main/big14.jpg"></center>'
				'"Katja, I need to tell you something," you say. "I''m pregnant again."'
				'Katja''s face lights up.'
				'"Congratulations! This is even more exciting than last time! Every time you tell me youâ€™re pregnant, I feel even better about my own pregnancy. Hell, that''s probably the reason you keep getting pregnant, isn''t it?" she giggles jokingly.'
				act 'Next':gt 'KatjaHomeTalk', 'katjaknows1'
			end		

		elseif knowKatjaPreg = 1:
			act 'Tell her you''re pregnant':
				cla & *clr
				'<center><b><font color="maroon"><<$npc_firstname[''A14'']>> <<$npc_lastname[''A14'']>></font></b></center>'
				'<center><img <<$set_imgh>> src="images/characters/shared/headshots_main/big14.jpg"></center>'
				'"What?! That''s so exiting! You didn''t get pregnant to be like me, did you?" she asks playfully.'
				act 'Next':gt 'KatjaHomeTalk', 'katjaknows'
			end

		elseif KatjaPreg = 0:
			act 'Tell her you''re pregnant':
				cla & *clr
				'<center><b><font color="maroon"><<$npc_firstname[''A14'']>> <<$npc_lastname[''A14'']>></font></b></center>'
				'<center><img <<$set_imgh>> src="images/characters/shared/headshots_main/big14.jpg"></center>'
				'"What? That''s so exiting!"'
				act 'Next':gt 'KatjaHomeTalk', 'katjaknows'
			end
		end
	end

	if npc_pregtalk['A14'] = 0 and KatjaConflict = 1 and KatConCheck ! daystart :
	!!If you did not tell katja that you are pregnant and she found out anyway. You can try to apologize. Different version if it is your fisrt child or not.
		if kid = 0:
			act 'Apologize':
				cla & *clr
				gs 'stat'
				KatjaConflict = 2
				!! IMAGE HERE
				'"I''m really sorry I didn''t tell you sooner. I was just so embarrassed."'
				'Katja sighs. "I understand. I just want you to know you can trust me and it hurts to realize that you don''t."'
				'"I do trust you. I promise I won''t keep anything like this from you in the future."'
				'"Good. Now let''s get down to business."'
				act 'Next':gt 'KatjaHomeTalk', 'katjaknows'
			end
		
		else
			act 'Apologize':
				cla & *clr
				gs 'stat'
				KatjaConflict = 2
				!! IMAGE HERE
				'"I''m really sorry I didn''t tell you sooner. I was just so embarrassed it happened again."'
				'Katja sighs. "I understand. I just want you to know you can trust me and it hurts to realize that you don''t."'
				'"I do trust you. I promise I won''t keep anything else like this from you in the future."'
				'"Good. Now let''s get down to business."'
				act 'Next':gt 'KatjaHomeTalk', 'katjaknows1'
			end
		end
	end

	if katjaQW['boy_block'] = 1:
		act 'Tell Katja you are have decided that boys are fun after all <br><font color="red">(Katja will start asking about sex with boys boys again)</font>': gt 'KatjaHomeTalk', 'boy_yes'
	end

	act 'Stop talking': gt 'katja_dorm', 'start'
	act 'Leave Katja''s dorm room':
		if sofiaQW['know'] = 0 and university['semester_week'] > 0:
			gt 'katja_dorm', 'soifa_meet'
		else
			minut += 2
			gt 'uni_dorm', 'second_floor'
		end
	end
end

if $ARGS[0] = 'sofia_meet':
	minut += 3
	sofiaQW['know'] = 1
	gs 'stat'
	'<center><img <<$set_imgh>> src="images/characters/shared/headshots_main/big260.jpg"></center>'
	'Just as you are about to leave, the door opens and and a girl walks in. "Hi Katja, I am home early since Maxim suddenly had a meeting with one of professors. I swear that he is doing so much to study hard, almost to much always trying to meet with his teachers. I told him that they might see it as.... Oh you have a guest." she says.'
	'"Sofia this is <<$pcs_nickname>> my '+iif($university['enrolled_in'] = 'teaching_studies', 'classmate and ', ' ')+'friend form school who is just bout to leave." Katja says to the girl who just entered the room, Katja then turns to you and say "<<$pcs_nickname>> this is Sofia my room mate."'
	'"Hi <<$pcs_nickname>>, it is so nice to meet Katja''s friends she doesn''t seem to have a lot of them" Sofia says which clearly make Katja blush. "So '+iif( $university['enrolled_in'] = 'teaching_studies', 'you are also studying to become a teacher like Katja', 'what are you studying')+'?" she ask. '+iif( $university['enrolled_in'] = 'teaching_studies', '"yes" ', '"I am '+iif(university[student] = 1, 'in the '+func('uni_programs', 'program_name')+' program', 'not studying at the university')+'" ')+'you answer.'
	'"Cool. I am '+iif($university['enrolled_in'] = 'nursing', 'also studying to become a nurse, now I notice I do think I have seen you in class.', 'studying to become a nurse.')+' You must tell me all about yourself and what naughty things Katja was up to in school." she sha making Katja blush even more. "I am sorry, but <<$pcs_nickname>> was a bout to leave." Katja says, looking at you as trying to say she is sorry.'
	'"That''s right I will be leaving now." you say. "Nice meeting you" Sofia says "Wish we had more time to chat, I barely knows anybody here, just Katja and my boyfriend Maxim. See you again soon. I am sure we will become great friends." she continues.'
	'You say goodbye to Katja and as you leave the room you can hear that Sofia continues to talk the ear of Katja.' 
	act 'Leave': gt 'uni_dorm', 'second_floor'	
end

--- katja_dorm ---------------------------------

